<h2>Chess Openings</h2>
<p>Select an opening to explore moves and variations.</p>

<input type="text" placeholder="Search openings..." class="search-box" [(ngModel)]="searchTerm" />

<div class="side-toggle">
  <button class="toggle-btn" [class.active]="filterSide === 'all'" (click)="filterSide = 'all'">
    All
  </button>

  <button class="toggle-btn" [class.active]="filterSide === 'white'" (click)="filterSide = 'white'">
    ♔ White
  </button>

  <button class="toggle-btn" [class.active]="filterSide === 'black'" (click)="filterSide = 'black'">
    ♚ Black
  </button>
</div>

<div class="openings-container">
  @for (opening of filteredOpenings(); track opening.id) {
    <mat-card
      class="opening-card"
      [ngClass]="{
        'black-card': opening.side === 'black',
        'disabled-card': !opening.variations || opening.variations.length === 0,
      }"
      [routerLink]="['/openings', opening.name]"
    >
      <!-- TOP IMAGE (60%) -->
      <img
        class="opening-thumb"
        [src]="'assets/openings/' + opening.name + '.jpg'"
        alt="{{ opening.name }}"
      />

      <!-- CONTENT (40%) -->
      <div class="card-content">
        <div class="card-title">
          {{ opening.name }}
        </div>

        <div class="card-side">
          @if (opening.side === 'white') {
            <span class="side-icon">♔</span>
          }
          @if (opening.side === 'black') {
            <span class="side-icon">♚</span>
          }
          {{ opening.side | titlecase }}
        </div>

        <div class="card-description">
          {{ opening.description }}
        </div>

        @if (!opening.variations || opening.variations.length === 0) {
          <div class="coming-soon">Coming Soon</div>
        }
      </div>
    </mat-card>
  }
</div>
